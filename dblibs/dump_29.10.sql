CREATE TABLE ACCOMODATION
(
    ID_ACC INTEGER PRIMARY KEY NOT NULL,
    ID_HOTEL INTEGER NOT NULL,
    PRICE INTEGER NOT NULL,
    QUANTITY INTEGER,
    TYPE VARCHAR2(50)
);
CREATE TABLE CONFIRM_EMAILS
(
    ID_USER INTEGER PRIMARY KEY NOT NULL,
    CONFIRM_HASH VARCHAR2(128) NOT NULL,
    DATE_CONFIRM DATE NOT NULL
);
CREATE TABLE DISCOUNTRULE
(
    ID_DC INTEGER PRIMARY KEY NOT NULL,
    NAME_DC VARCHAR2(12) NOT NULL,
    DISCOUNT_VALUE INTEGER NOT NULL
);
CREATE TABLE HOTEL
(
    ID_HOTEL INTEGER PRIMARY KEY NOT NULL,
    NAME_H VARCHAR2(20) NOT NULL,
    LOC_LAT INTEGER,
    LOC_LNG INTEGER,
    CATEGORY INTEGER,
    ID_SM INTEGER NOT NULL
);
CREATE TABLE "ORDER"
(
    ID_ORDER INTEGER PRIMARY KEY NOT NULL,
    ID_USER INTEGER NOT NULL,
    ID_SM INTEGER NOT NULL,
    DATE_ORDER DATE NOT NULL,
    ID_ACC INTEGER NOT NULL,
    PRICE INTEGER NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    ID_PC INTEGER NOT NULL,
    DISCOUNT INTEGER
);
CREATE TABLE PROMOCODE
(
    ID_PC INTEGER PRIMARY KEY NOT NULL,
    CODE VARCHAR2(20) NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    DISCOUNT INTEGER NOT NULL,
    ISUSED INTEGER
);
CREATE TABLE SALESMANAGER
(
    ID_SM INTEGER PRIMARY KEY NOT NULL,
    ID_USER INTEGER,
    COMMISSION INTEGER
);
CREATE TABLE USERS
(
    ID_USER INTEGER PRIMARY KEY NOT NULL,
    EMAIL VARCHAR2(50) NOT NULL,
    PSWD VARCHAR2(32) NOT NULL,
    USERNAME VARCHAR2(20) NOT NULL,
    CONFIRM_REGISTER INTEGER NOT NULL,
    ID_UT INTEGER NOT NULL,
    IS_BLOCKED INTEGER NOT NULL,
    ID_DC INTEGER,
    ID_CE INTEGER
);
CREATE TABLE USERTYPE
(
    ID_UT INTEGER PRIMARY KEY NOT NULL,
    NAME_T VARCHAR2(10) NOT NULL
);
ALTER TABLE ACCOMODATION ADD FOREIGN KEY ( ID_HOTEL ) REFERENCES HOTEL ( ID_HOTEL );
ALTER TABLE CONFIRM_EMAILS ADD FOREIGN KEY ( ID_USER ) REFERENCES USERS ( ID_USER );
ALTER TABLE HOTEL ADD FOREIGN KEY ( ID_SM ) REFERENCES SALESMANAGER ( ID_SM );
ALTER TABLE "ORDER" ADD FOREIGN KEY ( ID_ACC ) REFERENCES ACCOMODATION ( ID_ACC );
ALTER TABLE "ORDER" ADD FOREIGN KEY ( ID_PC ) REFERENCES PROMOCODE ( ID_PC );
ALTER TABLE "ORDER" ADD FOREIGN KEY ( ID_SM ) REFERENCES SALESMANAGER ( ID_SM );
ALTER TABLE "ORDER" ADD FOREIGN KEY ( ID_USER ) REFERENCES USERS ( ID_USER );
ALTER TABLE SALESMANAGER ADD FOREIGN KEY ( ID_USER ) REFERENCES USERS ( ID_USER );
ALTER TABLE USERS ADD FOREIGN KEY ( ID_DC ) REFERENCES DISCOUNTRULE ( ID_DC );
ALTER TABLE USERS ADD FOREIGN KEY ( ID_UT ) REFERENCES USERTYPE ( ID_UT );
